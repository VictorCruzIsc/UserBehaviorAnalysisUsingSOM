package modules;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

import utils.Utils;

public class Dataset {
	private static String GENERAL_PATH = "/Documents/git/UserBehaviorAnalysisUsingSOM/networkTrafficCaptures";
	private static String BUILD = "BuildDataSet";
	private static String TRAIN = "TrainDataSet";
	private static String EVALUATE = "EvaluationDataSet";
	private static String USER = "user";
	
	public enum DATASET_TYPE{
		DST_BUILD, DST_TRAIN, DST_EVALUATE
	}
	
	private static List<String> getFolderNames(String idUser){
		String home = System.getProperty("user.home");
		String base = home + GENERAL_PATH;
		String user =  USER + idUser;
		String build = base + BUILD + "/" + user;
		String train = base + TRAIN + "/" + user;
		String evaluate = base + EVALUATE + "/" + user;
		
		List<String> fileNames = new ArrayList<>();
		fileNames.add(build);
		fileNames.add(train);
		fileNames.add(evaluate);
		
		return fileNames;
	}
	
	private static List<String> getFolderFileNames(File folder){
		File[] files = folder.listFiles();
		// String flowsPattern = "(flows)(.*)(.csv)";
		// Pattern pattern = Pattern.compile(flowsPattern);
		
		List<String> fileNames = new ArrayList<>();
		
		for (File file : files) {
			String fileName = file.getName();
			if (fileName.endsWith(".csv")) {
				fileNames.add(fileName);
			}
		}
		
		return fileNames;
	}
	
	public static List<List<Package>> getRawPackages(String idUser){
		List<String> folderNames = getFolderNames(idUser);
		
		for(String folderName : folderNames){
			File folder = new File(folderName);
			List<String> fileNames = getFolderFileNames(folder);
			
			if(fileNames.size() > 0){
				for(String fileName : fileNames){
					List<String> fileContents = Utils.readFileContent(fileName);
					
					if(fileContents == null){
						Utils.logError("getRawPackages(String idUser) fileContents is null");
						return null;
					}
					
					Utils.logInfo(fileName + " total lines:" + fileContents.size());
					
					return null;
				}
			}else{
				Utils.logError("getRawPackages(String idUser) fileNames size() is 0");
				return null;
			}
		}
		
		return null;
	}
}
